!function(e){function t(n){if(l[n])return l[n].exports;var s=l[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var l={};t.m=e,t.c=l,t.i=function(e){return e},t.d=function(e,l,n){t.o(e,l)||Object.defineProperty(e,l,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var l=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(l,"a",l),l},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t){!function(e,t,l){e.Gridstrap=function(n,s){if("undefined"==typeof jQuery)throw new Error("yeah nah's JavaScript requires jQuery");var o=this;o.$el=e(n),o.el=n,o.constants=Object.freeze({DATA_GRIDSTRAP:"gridstrap",DATA_HIDDEN_CELL:"gridstrap-hidden-cell",DATA_VISIBLE_CELL:"gridstrap-visible-cell",DATA_MOUSEDOWN_CELL_POSITION:"gridstrap-mousedown-cell-position",DATA_MOUSEDOWN_PAGE_POSITION:"gridstrap-mousedown-screen-position",DATA_CELL_POSITION_AND_SIZE:"gridstrap-position-size",EVENT_DRAGSTART:"dragstart",EVENT_MOUSEDOWN:"mousedown",EVENT_MOUSEOVER:"mouseover",EVENT_MOUSEMOVE:"mousemove",EVENT_MOUSEUP:"mouseup",EVENT_RESIZE:"resize",EVENT_CELL_RESIZE:"cellresize"});var i={idPrefix:null,cellsArray:[],initCellsHiddenCopyAndSetAbsolutePosition:function(t){i.cellsArray.push(t);var l=o.options.getHtmlOfSourceCell.call(o,t),n=o.options.getAbsolutePositionAndSizeOfCell.call(o,t);t.before(l);var s=t.prev();s.addClass(o.options.hiddenCellClass),t.addClass(o.options.visibleCellClass),t.data(o.constants.DATA_HIDDEN_CELL,s),s.data(o.constants.DATA_VISIBLE_CELL,t),e(i.visibleCellContainerSelector).append(t.detach()),o.setCellAbsolutePositionAndSize(t,n)},visibleCellContainerSelector:null,dragCellSelector:null,resizeCellSelector:null,recentDragMouseOvers:[],lastMouseOverCellTarget:null,lastMoveMovePageCoordinates:{pageX:0,pageY:0},additionalGridstrapDragTargetSelector:null,$getClosestGridstrap:function(t){var l=function(t){return e(t).filter(function(){return!!e(this).data(o.constants.DATA_GRIDSTRAP)})},n=l(t);return n.length?n.first():l(e(t).parents()).first()},getCellAndInternalIndex:function(t){if(!t)return null;for(var l=e(t),n=null,s=0;s<i.cellsArray.length&&!n;s++){if(l.closest(i.cellsArray[s]).length>0){i.$getClosestGridstrap(l).is(o.$el)&&(n={index:s,$cell:i.cellsArray[s]})}}return n},moveCell:function(t,l,n){var s=function(e,t){var l=function(l){var n=e.is(l)?t:e,s=l.next(),o=l.prev(),i=l.parent();return s.length>0&&!s.is(n)?function(e){s.before(e)}:o.length>0&&!o.is(n)?function(e){o.after(e)}:function(e){i.append(e)}},n=l(e),s=l(t),o=e.detach(),i=t.detach();s(o),n(i)},a=function(e,t){var l=t.index(),n=e.index(),s=e.detach();l<n?t.before(s):t.after(s)},r=t.data(o.constants.DATA_HIDDEN_CELL),d=l.data(o.constants.DATA_HIDDEN_CELL);if(!r.is(d))if(n!==o){if(i.additionalGridstrapDragTargetSelector){var c=e(i.additionalGridstrapDragTargetSelector).filter(function(){return e(this).data(o.constants.DATA_GRIDSTRAP)===n});if(c.length>0)if(o.options.swapMode){var C=n.options.getAbsolutePositionAndSizeOfCell.call(n,l),u=o.options.getAbsolutePositionAndSizeOfCell.call(o,t),g=n.detachCell(l),p=o.detachCell(t),f=p.hasClass(o.options.dragCellClass);f&&p.removeClass(o.options.dragCellClass),s(p,g);var A=n.attachCell(p),v=o.attachCell(g);A.removeClass(o.options.visibleCellClass),v.removeClass(o.options.visibleCellClass),n.setCellAbsolutePositionAndSize(A,C),o.setCellAbsolutePositionAndSize(v,u),A.addClass(o.options.visibleCellClass),v.addClass(o.options.visibleCellClass),f&&A.addClass(o.options.dragCellClass),n.updateVisibleCellCoordinates(),o.updateVisibleCellCoordinates()}else{var u=o.options.getAbsolutePositionAndSizeOfCell.call(o,t),p=o.detachCell(t),f=p.hasClass(o.options.dragCellClass);f&&p.removeClass(o.options.dragCellClass),a(p,d);var A=n.attachCell(p);A.removeClass(o.options.visibleCellClass),n.setCellAbsolutePositionAndSize(A,u),A.addClass(o.options.visibleCellClass),f&&A.addClass(o.options.dragCellClass),n.updateVisibleCellCoordinates(),o.updateVisibleCellCoordinates()}}}else o.options.swapMode?s(r,d):a(r,d),o.updateVisibleCellCoordinates()},resizeCell:function(e,t,l){o.options.onResizeCell.call(o,e,t,l)},getHiddenCellsInElementOrder:function(){return e(o.$el).find("*").filter(function(){var t=e(this).data(o.constants.DATA_VISIBLE_CELL);if(!t||0===t.length)return!1;for(var l=0;l<i.cellsArray.length;l++)if(i.cellsArray[l].is(t))return!0;return!1})},setAndGetElementRecentlyDraggedMouseOver:function(t){for(var l=new Date,n=l.getTime(),s=0;s<i.recentDragMouseOvers.length;s++)if(i.recentDragMouseOvers[s].n+o.options.dragMouseoverThrottle<n&&i.recentDragMouseOvers.splice(s,1),s<i.recentDragMouseOvers.length&&e(i.recentDragMouseOvers[s].e).is(t))return!0;return i.recentDragMouseOvers.push({n:n,e:t}),!1},moveDraggedCell:function(t,n){var s=o.options.mouseMoveDragCallback.call(o,n,t);if(s||"boolean"!=typeof s){var a=n.data(o.constants.DATA_MOUSEDOWN_CELL_POSITION),r=n.data(o.constants.DATA_MOUSEDOWN_PAGE_POSITION);o.options.setPositionOfDraggedCell.call(o,a,r,n,t);var d=n.css("pointer-events");n.css("pointer-events","none");var c=function(l){l.trigger(e.Event(o.constants.EVENT_MOUSEOVER,{pageX:t.pageX,pageY:t.pageY,target:l[0]}))},C=l.elementFromPoint(t.clientX,t.clientY),u=i.getCellAndInternalIndex(C);u?c(u.$cell):i.additionalGridstrapDragTargetSelector&&e(i.additionalGridstrapDragTargetSelector).each(function(){var t=e(this).data(o.constants.DATA_GRIDSTRAP);if(t){var l=t.getCellOfElement(C);l&&c(l)}}),n.css("pointer-events",d)}},$getDraggingCell:function(){var t=e(i.dragCellSelector);return t.length&&i.$getClosestGridstrap(t).is(o.$el)?t:e()},mouseEventHandlers:{onDragstart:function(e,t,l){l===o&&e.preventDefault()},onMousedown:function(t,l,n){if(n===o)return o.options.resizeHandleSelector&&e(t.target).closest(o.options.resizeHandleSelector).length?void(l.hasClass(o.options.resizeCellClass)||(l.addClass(o.options.resizeCellClass),l.data(o.constants.DATA_MOUSEDOWN_PAGE_POSITION,{x:t.pageX,y:t.pageY}),l.data(o.constants.DATA_MOUSEDOWN_CELL_POSITION,o.options.getAbsolutePositionAndSizeOfCell.call(o,l)))):void(o.options.enableDragging&&!l.hasClass(o.options.dragCellClass)&&(l.data(o.constants.DATA_MOUSEDOWN_PAGE_POSITION,{x:t.pageX,y:t.pageY}),l.data(o.constants.DATA_MOUSEDOWN_CELL_POSITION,o.options.getAbsolutePositionAndSizeOfCell.call(o,l)),l.addClass(o.options.dragCellClass),i.moveDraggedCell(t,l)))},onMouseover:function(e,t,l){if(i.lastMouseOverCellTarget=null,l.options.enableDragging){var n=i.$getDraggingCell();n.length&&t&&0===n.closest(t).length&&(i.lastMouseOverCellTarget=t,i.setAndGetElementRecentlyDraggedMouseOver(t)||l.options.rearrangeWhileDragging&&(i.moveCell(n,t,l),i.moveDraggedCell(e,n)))}},onMousemove:function(t){var l=e(i.resizeCellSelector);if(l.length){var n=l.data(o.constants.DATA_MOUSEDOWN_CELL_POSITION),s=l.data(o.constants.DATA_MOUSEDOWN_PAGE_POSITION),a=n.w+t.pageX-s.x,r=n.h+t.pageY-s.y;l.css("width",a),l.css("height",r),o.options.resizeOnDrag&&i.resizeCell(l,a,r)}else{var d=i.$getDraggingCell();if(d.length){i.moveDraggedCell(t,d);var c=o.options.nonContiguousOptions,C=c.selector;if(C&&C.length){for(var u=o.getHiddenCells(),g=o.options.getAbsolutePositionAndSizeOfCell.call(o,u.last()),p=o.options.getAbsolutePositionAndSizeOfCell.call(o,d);p.y+p.h>g.y;){var f=o.insertCell(c.getHtml(),u.length);f.addClass(o.options.nonContiguousPlaceholderCellClass);var A=f.data(o.constants.DATA_HIDDEN_CELL);g=o.options.getAbsolutePositionAndSizeOfCell.call(o,A),p=o.options.getAbsolutePositionAndSizeOfCell.call(o,d),u=u.add(A)}for(var v=u.last();p.y+p.h<g.y&&v.data(o.constants.DATA_VISIBLE_CELL).hasClass(o.options.nonContiguousPlaceholderCellClass);){u=u.not(v),o.removeCell(v.data(o.constants.DATA_VISIBLE_CELL)),v=u.last(),g=o.options.getAbsolutePositionAndSizeOfCell.call(o,v);var p=o.options.getAbsolutePositionAndSizeOfCell.call(o,d)}}}}},onMouseup:function(t){if(o.options.enableDragging){var l=e(i.resizeCellSelector);if(o.options.resizeHandleSelector&&l.length){if(!o.options.resizeOnDrag){var n=l.data(o.constants.DATA_MOUSEDOWN_CELL_POSITION),s=l.data(o.constants.DATA_MOUSEDOWN_PAGE_POSITION),a=n.w+t.pageX-s.x,r=n.h+t.pageY-s.y;i.resizeCell(l,a,r)}return l.removeClass(o.options.resizeCellClass),void l.removeData(o.constants.DATA_MOUSEDOWN_PAGE_POSITION)}var d=i.$getDraggingCell();if(d.length>0){d.removeClass(o.options.dragCellClass),d.removeData(o.constants.DATA_MOUSEDOWN_PAGE_POSITION);var c=d.data(o.constants.DATA_CELL_POSITION_AND_SIZE);o.setCellAbsolutePositionAndSize(d,c),i.lastMouseOverCellTarget&&!o.options.rearrangeWhileDragging&&i.moveCell(d,i.lastMouseOverCellTarget,o)}}}},handleCellMouseEvent:function(t,l,n,s){var i=t.options.gridCellSelector+" "+t.options.dragCellHandleSelector;t.options.dragCellHandleSelector!==e.Gridstrap.defaultOptions.dragCellHandleSelector&&l!==o.constants.EVENT_MOUSEOVER||(i=t.options.gridCellSelector+","+i),e(t.options.visibleCellContainerParentSelector).on(l,i,function(e){var l=t.getCellOfElement(e.target);n&&!l||s(e,l,t)})},debounce:function(e,t,l){var n;return function(){var s=this,o=arguments,i=function(){n=null,l||e.apply(s,o)},a=l&&!t;clearTimeout(n),n=setTimeout(i,t),a&&e.apply(s,o)}},init:function(){if(o.options=e.extend({},e.Gridstrap.defaultOptions,s),o.$el.data(o.constants.DATA_GRIDSTRAP))return void(o.options.debug&&console.log("Gridstrap already initialised for element: "+o.el.nodeName));o.$el.data(o.constants.DATA_GRIDSTRAP,o),o.options.debug&&console.log("Gridstrap initialised for element: "+o.el.nodeName);var l=function(){return Math.random().toString(36).substr(2,5)+Math.round(1e3*Math.random()).toString()};!function(){var t=o.$el.find(o.options.gridCellSelector);i.idPrefix=l();var n="gridstrap-"+i.idPrefix;i.visibleCellContainerSelector="#"+n,i.dragCellSelector=i.visibleCellContainerSelector+" "+o.options.dragCellClass.replace(/(^ *| +)/g,".")+":first",i.resizeCellSelector=i.visibleCellContainerSelector+" "+o.options.resizeCellClass.replace(/(^ *| +)/g,".")+":first",i.visibleCellContainerClassSelector=o.options.visibleCellContainerClass.replace(/(^ *| +)/g,".")+":first",o.options.visibleCellContainerParentSelector=o.options.visibleCellContainerParentSelector||o.$el,e(o.options.visibleCellContainerParentSelector).append('<div id="'+n+'" class="'+o.options.visibleCellContainerClass+'"></div>'),t.each(function(t){i.initCellsHiddenCopyAndSetAbsolutePosition(e(this))})}(),i.handleCellMouseEvent(o,o.constants.EVENT_DRAGSTART+".gridstrap",!0,i.mouseEventHandlers.onDragstart),i.handleCellMouseEvent(o,o.constants.EVENT_MOUSEDOWN+".gridstrap",!0,i.mouseEventHandlers.onMousedown),i.handleCellMouseEvent(o,o.constants.EVENT_MOUSEOVER+".gridstrap",!1,i.mouseEventHandlers.onMouseover),e(o.options.mouseMoveSelector).on(o.constants.EVENT_MOUSEMOVE+".gridstrap",i.mouseEventHandlers.onMousemove).on(o.constants.EVENT_MOUSEUP+".gridstrap",i.mouseEventHandlers.onMouseup),o.options.updateCoordinatesOnWindowResize&&e(t).on(o.constants.EVENT_RESIZE+".gridstrap",i.debounce(o.updateVisibleCellCoordinates,o.options.mouseMoveDebounce))}};o.updateVisibleCellCoordinates=function(){for(var t=0;t<i.cellsArray.length;t++){var l=i.cellsArray[t],n=l.data(o.constants.DATA_HIDDEN_CELL),s=o.options.getAbsolutePositionAndSizeOfCell.call(o,n);o.setCellAbsolutePositionAndSize(l,s)}for(var t=0;t<i.cellsArray.length;t++){var a=i.cellsArray[t].find("*").filter(function(){return!!e(this).data(o.constants.DATA_GRIDSTRAP)});a.length>0&&a.first().data(o.constants.DATA_GRIDSTRAP).updateVisibleCellCoordinates()}},o.insertCell=function(t,l){var n=i.getHiddenCellsInElementOrder();void 0===l&&(l=n.length);var s;return s=l===n.length?0===n.length?e(t).appendTo(o.$el):e(t).insertAfter(n.last()):e(t).insertBefore(n.eq(l)),o.attachCell(s),s},o.attachCell=function(t){if(!e(t).closest(o.$el).is(o.$el))throw"Cannot attach element that is not a child of gridstrap parent";return i.initCellsHiddenCopyAndSetAbsolutePosition(t),o.updateVisibleCellCoordinates(),e(t)},o.detachCell=function(e){var t=i.getCellAndInternalIndex(e),l=t.$cell.data(o.constants.DATA_HIDDEN_CELL),n=t.$cell.detach();n.css("top",""),n.css("left",""),n.css("width",""),n.css("height",""),n.removeData(o.constants.DATA_HIDDEN_CELL),n.removeClass(o.options.visibleCellClass);var s=n.insertAfter(l);return l.remove(),i.cellsArray.splice(t.index,1),s},o.removeCell=function(e){o.detachCell(e).remove(),o.updateVisibleCellCoordinates()},o.moveCell=function(e,t,l){var n=i.getCellAndInternalIndex(e),s=o.getCells();i.moveCell(n.$cell,s.eq(t))},o.moveCellToCoordinates=function(e,t,l,n){},o.getCells=function(){var t=i.getHiddenCellsInElementOrder(),l=t.map(function(){return e(this).data(o.constants.DATA_VISIBLE_CELL)[0]});return e(l)},o.getHiddenCells=function(){return i.getHiddenCellsInElementOrder()},o.getCellContainer=function(){return e(i.visibleCellContainerSelector)},o.updateOptions=function(t){o.options=e.extend({},o.options,t)},o.getCellOfElement=function(e){var t=i.getCellAndInternalIndex(e);return t&&t.$cell},o.getCellIndexOfElement=function(e){var t=o.getCellOfElement(e);return o.getCells().index(t)},o.setCellAbsolutePositionAndSize=function(e,t){e.data(o.constants.DATA_CELL_POSITION_AND_SIZE,t),e.css("left",t.x),e.css("top",t.y),e.css("width",t.w),e.css("height",t.h)},o.setAdditionalGridstrapDragTarget=function(t){i.additionalGridstrapDragTargetSelector&&e(i.additionalGridstrapDragTargetSelector).each(function(){e(e(this).data(o.constants.DATA_GRIDSTRAP).options.visibleCellContainerParentSelector).off(o.constants.EVENT_MOUSEOVER+".gridstrap-additional-"+i.idPrefix)}),i.additionalGridstrapDragTargetSelector=t,i.additionalGridstrapDragTargetSelector&&e(i.additionalGridstrapDragTargetSelector).each(function(){i.handleCellMouseEvent(e(this).data(o.constants.DATA_GRIDSTRAP),o.constants.EVENT_MOUSEOVER+".gridstrap-additional-"+i.idPrefix,!1,i.mouseEventHandlers.onMouseover)})},o.modifyCell=function(e,t){var l=o.getCells().eq(e),n=l.data(o.constants.DATA_HIDDEN_CELL),s=!1,i=!1;t.call(o,function(){return s=!0,l},function(){return i=!0,n}),s&&n.html(l.html()),o.updateVisibleCellCoordinates()},i.init()},e.Gridstrap.defaultOptions={gridCellSelector:">*",hiddenCellClass:"gridstrap-cell-hidden",visibleCellClass:"gridstrap-cell-visible",dragCellHandleSelector:"*",dragCellClass:"gridstrap-cell-drag",resizeCellClass:"gridstrap-cell-resize",mouseMoveSelector:"body",visibleCellContainerParentSelector:null,visibleCellContainerClass:"gridstrap-container",nonContiguousPlaceholderCellClass:"gridstack-noncontiguous",getAbsolutePositionAndSizeOfCell:function(e){this.options.debug&&!e.is(":visible")&&console.log("Grid cell is invisible. Gridstrap should not initialise an invisible grid. ("+this.el.nodeName+": "+e[0].nodeName+")");var t=e.position(),l=e.outerWidth(),n=e.outerHeight();return{x:t.left,y:t.top,w:l,h:n}},getHtmlOfSourceCell:function(e){return e[0].outerHTML},setPositionOfDraggedCell:function(e,t,l,n){var s=n.pageX+e.x-t.x,o=n.pageY+e.y-t.y;l.css("left",s),l.css("top",o)},mouseMoveDragCallback:function(e,t){},enableDragging:!0,rearrangeWhileDragging:!0,swapMode:!1,nonContiguousOptions:{selector:null,getHtml:function(){return null}},updateCoordinatesOnWindowResize:!0,debug:!1,dragMouseoverThrottle:500,windowResizeDebounce:50,resizeHandleSelector:null,resizeOnDrag:!0,onResizeCell:function(t,l,n){var s=e.Event(this.constants.EVENT_CELL_RESIZE,{width:l,height:n,target:t[0]});if(this.$el.trigger(s),!s.isDefaultPrevented()){var o=t.data(this.constants.DATA_HIDDEN_CELL);o.css("width",l),o.css("height",n),this.updateVisibleCellCoordinates()}}},e.fn.gridstrap=function(t){return this.each(function(){new e.Gridstrap(this,t)})}}(jQuery,window,document)}]);